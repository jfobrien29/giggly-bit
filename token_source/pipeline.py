
from .joke_generation import segment_to_whole, generate_joke_txt
from .laugh_token import parse_audio_at_timestamps

if __name__ == "__main__":
    audio_path = "./test_audio.mp3"
    timestamps = [{'filename': './tst_wave/laugh_1.wav', 'start': 12.452621094833455, 'end': 15.036249022920396}, {'filename': './tst_wave/laugh_2.wav', 'start': 18.92332887869084, 'end': 20.94833455205628}, {'filename': './tst_wave/laugh_3.wav', 'start': 22.298338334299906, 'end': 23.275927280062533}, {'filename': './tst_wave/laugh_4.wav', 'start': 29.58370357295948, 'end': 32.21388335560655}, {'filename': './tst_wave/laugh_5.wav', 'start': 36.9621725207393, 'end': 39.24321339418543}, {'filename': './tst_wave/laugh_6.wav', 'start': 49.64755288837338, 'end': 52.99928641670239}, {'filename': './tst_wave/laugh_7.wav', 'start': 62.05362212864671, 'end': 65.26570009329534}, {'filename': './tst_wave/laugh_8.wav', 'start': 65.87087420257697, 'end': 68.66398547618446}, {'filename': './tst_wave/laugh_9.wav', 'start': 81.02350286189767, 'end': 82.0010918076603}, {'filename': './tst_wave/laugh_10.wav', 'start': 84.88730679038805, 'end': 87.98300511863637}, {'filename': './tst_wave/laugh_11.wav', 'start': 92.61491464736882, 'end': 94.77957588441463}, {'filename': './tst_wave/laugh_12.wav', 'start': 116.05377341839178, 'end': 131.78830025971405}, {'filename': './tst_wave/laugh_13.wav', 'start': 132.30037065987543, 'end': 133.41761516931842}, {'filename': './tst_wave/laugh_14.wav', 'start': 143.89178244534656, 'end': 148.15127713759802}, {'filename': './tst_wave/laugh_15.wav', 'start': 151.96852921152828, 'end': 154.17974230313422}, {'filename': './tst_wave/laugh_16.wav', 'start': 162.65217983307699, 'end': 165.1892559066038}, {'filename': './tst_wave/laugh_17.wav', 'start': 166.81857081620817, 'end': 173.24272674550542}, {'filename': './tst_wave/laugh_18.wav', 'start': 197.4962429713306, 'end': 204.1298822461484}, {'filename': './tst_wave/laugh_19.wav', 'start': 207.64454726543786, 'end': 210.2281751935248}, {'filename': './tst_wave/laugh_20.wav', 'start': 221.56355177891524, 'end': 223.5885574522807}, {'filename': './tst_wave/laugh_21.wav', 'start': 233.9463450919085, 'end': 236.85583600191632}, {'filename': './tst_wave/laugh_22.wav', 'start': 239.99808618472477, 'end': 241.86016036712977}, {'filename': './tst_wave/laugh_23.wav', 'start': 244.60671978617717, 'end': 248.51707556922767}, {'filename': './tst_wave/laugh_24.wav', 'start': 252.3343276431579, 'end': 256.0584760079679}, {'filename': './tst_wave/laugh_25.wav', 'start': 268.34816561184095, 'end': 270.9085176126478}, {'filename': './tst_wave/laugh_26.wav', 'start': 273.1430066315338, 'end': 276.5180160871429}, {'filename': './tst_wave/laugh_27.wav', 'start': 278.2171587785875, 'end': 279.6602662699513}, {'filename': './tst_wave/laugh_28.wav', 'start': 286.06114627196854, 'end': 288.41201492725486}, {'filename': './tst_wave/laugh_29.wav', 'start': 291.9034040192642, 'end': 295.46462089311376}, {'filename': './tst_wave/laugh_30.wav', 'start': 304.2629214049774, 'end': 306.17154744194255}, {'filename': './tst_wave/laugh_31.wav', 'start': 308.7784512973096, 'end': 316.41295544517004}, {'filename': './tst_wave/laugh_32.wav', 'start': 323.30262992006857, 'end': 325.67677450263494}, {'filename': './tst_wave/laugh_33.wav', 'start': 327.3060894122393, 'end': 328.5629894853627}, {'filename': './tst_wave/laugh_34.wav', 'start': 332.65955268665374, 'end': 333.9862805416173}, {'filename': './tst_wave/laugh_35.wav', 'start': 338.43198265210924, 'end': 339.52595123427216}, {'filename': './tst_wave/laugh_36.wav', 'start': 350.76822411054235, 'end': 352.4208149474268}, {'filename': './tst_wave/laugh_37.wav', 'start': 370.4131067349151, 'end': 371.7631105171588}, {'filename': './tst_wave/laugh_38.wav', 'start': 374.13725509972517, 'end': 375.81312186388965}, {'filename': './tst_wave/laugh_39.wav', 'start': 377.65192011901456, 'end': 380.3053758289417}, {'filename': './tst_wave/laugh_40.wav', 'start': 395.52783227010264, 'end': 399.55456768955344}, {'filename': './tst_wave/laugh_41.wav', 'start': 405.07096245492824, 'end': 415.7080612219168}, {'filename': './tst_wave/laugh_42.wav', 'start': 430.8374139539575, 'end': 433.16500668196375}, {'filename': './tst_wave/laugh_43.wav', 'start': 439.28657555662016, 'end': 442.0796868302277}, {'filename': './tst_wave/laugh_44.wav', 'start': 446.9676315590408, 'end': 449.13229279608663}, {'filename': './tst_wave/laugh_45.wav', 'start': 452.3210948334552, 'end': 455.230585743463}, {'filename': './tst_wave/laugh_46.wav', 'start': 455.5331727981038, 'end': 456.8366247257873}, {'filename': './tst_wave/laugh_47.wav', 'start': 460.3280138177967, 'end': 467.35734385637556}, {'filename': './tst_wave/laugh_48.wav', 'start': 473.106497894551, 'end': 475.08495171335636}, {'filename': './tst_wave/laugh_49.wav', 'start': 476.4815073501601, 'end': 480.1358279331299}, {'filename': './tst_wave/laugh_50.wav', 'start': 484.4418744799415, 'end': 488.21257469931163}, {'filename': './tst_wave/laugh_51.wav', 'start': 498.75656975717993, 'end': 501.85226808542825}, {'filename': './tst_wave/laugh_52.wav', 'start': 503.99365339519403, 'end': 507.13590357800246}, {'filename': './tst_wave/laugh_53.wav', 'start': 522.963534128445, 'end': 527.7816510754179}, {'filename': './tst_wave/laugh_54.wav', 'start': 537.2316775511233, 'end': 537.6273683148844}, {'filename': './tst_wave/laugh_55.wav', 'start': 542.2360019163367, 'end': 544.3773872261025}, {'filename': './tst_wave/laugh_56.wav', 'start': 546.6351521722686, 'end': 549.1489523185153}, {'filename': './tst_wave/laugh_57.wav', 'start': 556.9929398118963, 'end': 561.9739882498297}, {'filename': './tst_wave/laugh_58.wav', 'start': 563.8127865049547, 'end': 565.418825487279}, {'filename': './tst_wave/laugh_59.wav', 'start': 580.4783504374795, 'end': 582.6662876018054}, {'filename': './tst_wave/laugh_60.wav', 'start': 589.4163065130235, 'end': 599.4947830252905}, {'filename': './tst_wave/laugh_61.wav', 'start': 608.9913613555561, 'end': 612.319818956605}, {'filename': './tst_wave/laugh_62.wav', 'start': 616.3698303033359, 'end': 619.5586323407044}, {'filename': './tst_wave/laugh_63.wav', 'start': 622.2353639779117, 'end': 628.9621069618497}, {'filename': './tst_wave/laugh_64.wav', 'start': 632.6397034720997, 'end': 638.4586852921153}, {'filename': './tst_wave/laugh_65.wav', 'start': 639.2267908923574, 'end': 642.5086966388461}, {'filename': './tst_wave/laugh_66.wav', 'start': 650.6087193323079, 'end': 651.7026879144709}, {'filename': './tst_wave/laugh_67.wav', 'start': 657.1725308252855, 'end': 660.710471771855}, {'filename': './tst_wave/laugh_68.wav', 'start': 662.6190978088201, 'end': 674.5363725762122}, {'filename': './tst_wave/laugh_69.wav', 'start': 676.9803449406188, 'end': 682.2174285786328}, {'filename': './tst_wave/laugh_70.wav', 'start': 686.9191658892055, 'end': 689.4795178900123}, {'filename': './tst_wave/laugh_71.wav', 'start': 697.9985072745152, 'end': 704.7718021130135}, {'filename': './tst_wave/laugh_72.wav', 'start': 710.0787135328677, 'end': 720.250293754255}, {'filename': './tst_wave/laugh_73.wav', 'start': 727.3727275019542, 'end': 731.0968758667641}, {'filename': './tst_wave/laugh_74.wav', 'start': 734.774472377014, 'end': 737.6606873597418}, {'filename': './tst_wave/laugh_75.wav', 'start': 742.6650117249552, 'end': 749.2288232179328}, {'filename': './tst_wave/laugh_76.wav', 'start': 752.9529715827429, 'end': 755.257288383469}, {'filename': './tst_wave/laugh_77.wav', 'start': 757.445225547795, 'end': 759.0512645301193}, {'filename': './tst_wave/laugh_78.wav', 'start': 764.7771426410146, 'end': 771.3642300612723}, {'filename': './tst_wave/laugh_79.wav', 'start': 774.7625154441614, 'end': 777.1366600267278}, {'filename': './tst_wave/laugh_80.wav', 'start': 777.6720063541693, 'end': 781.7685695554603}, {'filename': './tst_wave/laugh_81.wav', 'start': 782.769434428503, 'end': 783.5375400287451}, {'filename': './tst_wave/laugh_82.wav', 'start': 793.8022239592526, 'end': 796.3160241054993}, {'filename': './tst_wave/laugh_83.wav', 'start': 797.8755112332635, 'end': 802.4143170528757}, {'filename': './tst_wave/laugh_84.wav', 'start': 804.6022542172017, 'end': 806.8832950906477}, {'filename': './tst_wave/laugh_85.wav', 'start': 808.7919211276129, 'end': 811.7945157467409}, {'filename': './tst_wave/laugh_86.wav', 'start': 820.6160921858847, 'end': 826.8773166242214}, {'filename': './tst_wave/laugh_87.wav', 'start': 830.01956680703, 'end': 831.8583650621548}, {'filename': './tst_wave/laugh_88.wav', 'start': 833.5575077535995, 'end': 834.2557855720013}, {'filename': './tst_wave/laugh_89.wav', 'start': 844.4971935752288, 'end': 847.4997881943568}, {'filename': './tst_wave/laugh_90.wav', 'start': 881.040399404927, 'end': 886.3705867520613}, {'filename': './tst_wave/laugh_91.wav', 'start': 888.6981794800676, 'end': 893.0275019541592}, {'filename': './tst_wave/laugh_92.wav', 'start': 902.8266673390655, 'end': 905.1077082125116}, {'filename': './tst_wave/laugh_93.wav', 'start': 921.3543054539953, 'end': 923.0767240727199}]

    parse_audio_at_timestamps(audio_path, timestamps)

    segment_to_whole()

    custom_prompt = "Here is the text of a conversation and every time someone laughs there is a [laughter] tag. Try to summarize the jokes before each [laughter] tag and output a json file with the jokes. The result json should only have the list of joke_1, joke_2 to indicate the joke order. "

    # Specify the path to your .txt file
    file_path = "./data/full_transcription.txt"

    generate_joke_txt(file_path, custom_prompt)

